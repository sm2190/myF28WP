<!DOCTYPE html>
<html lamg = "en">
    <head>
        <link rel = "preconnect" href = "https://fonts.googleapis.com">
        <link rel = "preconnect" href = "https://fonts.gstatic.com" crossorigin>
        <link href = "https://fonts.googleapis.com/css?family=Gabarito&family=Moontserrat:wght@900&display=swap" rel=" stylesheet">
        <meta charset = "UTF-8">
        <title>
            Gallery - Wanderlust Voyages
        </title>
        <link rel ="stylesheet" href="style.css">
        <meta name = "viewport" content = "width=device-width, initial-scale=1.0">


<body>
    <form id = "form" action="/">
            <div class = "input-control">
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" required>
            <div class="error" id="username-error"></div>
            </div>

            <div class = "input-control">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
            <div class="error" id="email-error"></div>
            </div>

            <div class = "input-control">
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required>
            <div class="error" id="password-error"></div>
            </div>

            <div class = "input-control">
            <label for="confirm-password">Confirm Password:</label>
            <input type="password" id="confirm-password" name="confirm-password" required>
            <div class="error" id="confirm-password-error"></div>
            </div>

            <button type="submit" value="submit">Submit</button>
    </form>






<script>
    const form = document.getElementById('form');
    const username = document.getElementById('username');
    const email = document.getElementById('email');
    const password = document.getElementById('password');
    const confirmPassword = document.getElementById('confirm-password');


    form.addEventListener('submit', event=> {
        event.preventDefault();
        validateInputs();
    });


    const validateField = (element, errorMessage, condition) =>{
        if(condition){
            setError(element, errorMessage);
        } else{
            setSuccess(element);
        }
    }


    const setError = (element, message) =>{    
        const inputControl = element.parentElement;
        const errorDisplay = inputControl.querySelector('.error');

        errorDisplay.innerText = message;
        inputControl.classList.add('error');
        inputControl.classList.remove('success');
    }

    const setSuccess = element =>{
        const inputControl = element.parentElement;
        const errorDisplay = inputControl.querySelector('.error');

        errorDisplay.innerText = '';
        inputControl.classList.add('success');
        inputControl.classList.remove('error');
    }

    const validateInputs = () => {
      const validUsername = validateField(username, 'Username required',username.value.trim()=== '');
        const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
      const validEmail =  validateField(email, 'Invalid Email Format',email.value.trim() === '' || !emailRegex.test(email.value));
      const validPassword = validateField(password, 'Password required',password.value === '' || password.value.length < 8);
      const validConfirmPassword = validateField(confirmPassword, 'Passwords don not match',confirmPassword.value === '' || confirmPassword.value !== password.value );

        if(validUsername && validEmail && validPassword && validConfirmPassword){
            form.submit();
        }
    }
</script>
</body>
